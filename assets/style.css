:root{
  --accent:#4caf50;
  --accent-strong:#2e7d32;
  --bg:#f6faf7;
  --card:#ffffff;
  --text:#0f1724;
  --muted:#6b7280;
  --border:#e6eef3;
  --radius:14px;
  --shadow:0 8px 28px rgba(15,23,36,0.06);
  --glass:rgba(255,255,255,0.7);
  --trans:220ms cubic-bezier(.2,.9,.2,1);
}
[data-theme="dark"]{
  --accent:#81c784;
  --accent-strong:#4caf50;
  --bg:#0b0f12;
  --card:#0f1720;
  --text:#e6eef6;
  --muted:#9aa4b2;
  --border:#24303a;
  --shadow:0 10px 30px rgba(2,6,23,0.6);
  --glass:rgba(10,12,15,0.7);
}

/* base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;padding:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter, "Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background var(--trans), color var(--trans);
}

/* NAV */
nav.site-nav{
  position:fixed;top:0;left:0;right:0;height:64px;display:flex;align-items:center;justify-content:space-between;padding:0 18px;background:var(--card);box-shadow:var(--shadow);z-index:1200;
}
nav.site-nav .brand{font-weight:700;color:var(--accent-strong);text-decoration:none;}
nav.site-nav .links{display:flex;gap:8px;align-items:center;}
nav.site-nav .links a{color:var(--text);text-decoration:none;padding:8px;border-radius:8px;font-weight:600;}
nav.site-nav .links a.active{color:var(--accent);}

/* container */
.container{max-width:1000px;margin:88px auto 140px;padding:0 16px;}

/* card */
.card{background:var(--card);border-radius:12px;padding:16px;box-shadow:var(--shadow);transition:transform var(--trans), box-shadow var(--trans);}
.card:hover{transform:translateY(-3px);}
h1,h2,h3,h4{margin:0 0 8px 0}

/* search */
.search-row{display:flex;gap:10px;align-items:center;margin-bottom:12px;}
.search-row input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--text);}
.search-row button{padding:10px 14px;border-radius:10px;border:none;background:var(--accent);color:white;cursor:pointer;font-weight:600}

/* posts */
.posts-grid{display:flex;flex-direction:column;gap:12px;margin-top:10px}
.post-card{padding:16px;border-radius:12px;border:1px solid transparent;background:linear-gradient(180deg,var(--card),var(--card));display:block}
.post-meta{display:flex;gap:12px;color:var(--muted);font-size:.9rem;margin-bottom:8px;align-items:center}
.post-title{font-weight:700;font-size:1.06rem;margin-bottom:6px}
.post-excerpt{color:var(--muted);font-size:.95rem;line-height:1.5;margin-bottom:10px}
.tags{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.tag{background:var(--accent-strong);color:#fff;padding:6px 10px;border-radius:999px;font-size:.85rem;cursor:pointer;opacity:.95}
.tag.ghost{background:transparent;color:var(--muted);border:1px solid var(--border)}

/* actions */
.actions{display:flex;gap:8px;align-items:center;justify-content:flex-end}
.icon-btn{background:transparent;border:none;padding:8px;cursor:pointer;border-radius:8px;color:var(--muted);display:inline-flex;align-items:center;gap:8px;font-weight:600;transition:transform 120ms ease,color 160ms}
.icon-btn:active{transform:scale(.97)}
.icon-btn.liked{color:var(--accent-strong);box-shadow:0 6px 18px rgba(46,125,50,0.08)}
.icon-btn.bookmarked{color:#f4b400;box-shadow:0 6px 18px rgba(244,180,0,0.07)}

/* like pulse */
.like-pulse{animation:likePulse 420ms cubic-bezier(.2,.9,.2,1)}
@keyframes likePulse{0%{transform:scale(1)}30%{transform:scale(1.28);filter:drop-shadow(0 8px 18px rgba(46,125,50,0.14))}100%{transform:scale(1)}}

/* fab */
.fab{position:fixed;right:22px;bottom:22px;width:64px;height:64px;border-radius:999px;border:none;background:var(--accent);color:#fff;font-size:28px;display:flex;align-items:center;justify-content:center;box-shadow:0 12px 36px rgba(2,6,23,0.12);cursor:pointer;z-index:1300}

/* modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.36);display:none;align-items:center;justify-content:center;z-index:1400}
.modal{width:100%;max-width:860px;background:var(--card);border-radius:12px;padding:18px;box-shadow:var(--shadow)}

/* form */
.form-row{display:flex;gap:8px;align-items:center;margin-bottom:10px}
input,select,textarea{padding:10px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--text);width:100%}
textarea{min-height:160px;resize:vertical}

/* toast & loading */
#toast{position:fixed;left:50%;transform:translateX(-50%);bottom:28px;background:var(--card);padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);opacity:0;transition:opacity .3s ease,transform .3s ease;z-index:1600;pointer-events:none}
#toast.show{opacity:1;transform:translateX(-50%) translateY(-8px);pointer-events:auto}
#loading-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(255,255,255,0.6);backdrop-filter:blur(4px);z-index:1600}
#loading-overlay .spinner{padding:16px 22px;border-radius:12px;background:var(--card);font-weight:700;color:var(--accent);box-shadow:var(--shadow)}

/* reply */
.reply{border-radius:10px;padding:12px;border:1px solid var(--border);margin-bottom:8px;background:var(--card)}
.reply .reply-meta{color:var(--muted);font-size:.85rem;margin-bottom:6px}
.reply .reply-body{white-space:pre-wrap;line-height:1.6;margin-bottom:8px}

/* profile */
.profile-head{display:flex;gap:14px;align-items:center;flex-wrap:wrap}
.profile-head img{width:110px;height:110px;border-radius:999px;object-fit:cover;border:3px solid var(--accent);box-shadow:0 6px 20px rgba(46,125,50,0.08)}

/* ranking */
.rank-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.rank-card{padding:12px;border-radius:12px;background:linear-gradient(180deg,var(--card),var(--card));border:1px solid var(--border)}

/* responsive tweaks */
@media(max-width:720px){
  .container{margin:84px 12px 120px}
  nav.site-nav{height:56px;padding:0 12px}
  .fab{width:56px;height:56px}
}

/* ===== „Éá„Ç∂„Ç§„É≥„ÉÜ„Éº„Éû„É¢„Éº„ÉÄ„É´ ===== */
#theme-panel {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

.theme-modal {
  background: var(--card);
  color: var(--text);
  padding: 24px;
  border-radius: var(--radius);
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  width: 260px;
  text-align: center;
}

.theme-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.theme-choice {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--bg);
  cursor: pointer;
  transition: 0.2s;
}
.theme-choice:hover {
  background: var(--accent);
  color: white;
}

.theme-color {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow: 0 0 0 1px var(--border);
}

/* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ===== „Çπ„Éö„Ç∑„É£„É´ËÉåÊôØÂäπÊûú ===== */
body.special-bg {
  position: relative;
  overflow-x: hidden;
}

/* ÈùíÁ©∫„ÉÜ„Éº„Éû */
body.special-bg::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 200%;
  height: 100%;
  background: url('assets/clouds.svg') repeat-x;
  animation: cloudMove 60s linear infinite;
  opacity: 0.4;
  z-index: -1;
}
@keyframes cloudMove {
  from { transform: translateX(0); }
  to { transform: translateX(-50%); }
}

/* „Éú„Çø„É≥„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
body.special-bg button {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
body.special-bg button:active {
  transform: scale(0.95);
  box-shadow: 0 0 12px var(--accent);
}

/* ==== „Çπ„Éö„Ç∑„É£„É´ËÉåÊôØÔºà„ÉÜ„Éº„ÉûÂà•Ôºâ ==== */
body.special-bg { position: relative; overflow: hidden; }

/* ÈùíÁ©∫„ÉÜ„Éº„Éû */
body.special-bg[data-theme='light']::before,
body.special-bg:not([data-theme='dark']):not([data-theme='neo']):not([data-theme='night']):not([data-theme='sakura']):not([data-theme='yellow'])::before {
  content:"";position:fixed;top:0;left:0;width:200%;height:100%;
  background:url('assets/clouds.svg') repeat-x;
  animation:cloudMove 60s linear infinite;opacity:.4;z-index:-1;
}
@keyframes cloudMove {from{transform:translateX(0)}to{transform:translateX(-50%)}}

/* üå∏„Åï„Åè„Çâ */
body.special-bg[data-theme='sakura']::before {
  content:"";position:fixed;inset:0;z-index:-1;
  background-image:radial-gradient(rgba(244,143,177,0.3) 2px,transparent 3px);
  background-size:100px 100px;
  animation:sakuraFall 8s linear infinite;
}
@keyframes sakuraFall {0%{background-position:0 0}100%{background-position:-100px 100px}}

/* üåÉÂ§úÁ©∫ */
body.special-bg[data-theme='night']::before {
  content:"";position:fixed;inset:0;z-index:-1;
  background:radial-gradient(#1c1f26,#000);
  box-shadow:0 0 60px rgba(0,0,0,.8) inset;
}
body.special-bg[data-theme='night']::after {
  content:"";position:fixed;inset:0;z-index:-1;
  background:url('assets/stars.svg') repeat;
  animation:starBlink 3s ease-in-out infinite alternate;
  opacity:.6;
}
@keyframes starBlink {from{opacity:.4}to{opacity:.8}}

/* ‚òÄÔ∏è„Å≤„Å†„Åæ„Çä */
body.special-bg[data-theme='yellow']::before {
  content:"";position:fixed;inset:0;z-index:-1;
  background:radial-gradient(circle at top,#fff9e6,#ffe57f);
  animation:sunPulse 6s ease-in-out infinite alternate;opacity:.7;
}
@keyframes sunPulse {from{filter:brightness(1)}to{filter:brightness(1.2)}}

/* ‚ö°„Éç„Ç™ */
body.special-bg[data-theme='neo']::before {
  content:"";position:fixed;inset:0;z-index:-1;
  background:linear-gradient(135deg,#00bcd4 0%,#8e24aa 100%);
  animation:neoShift 10s linear infinite;
  background-size:200% 200%;opacity:.3;
}
@keyframes neoShift {0%{background-position:0 0}100%{background-position:100% 100%}}

/* „Éú„Çø„É≥ÂèçÂøú */
body.special-bg button {
  transition:transform .2s,box-shadow .2s;
}
body.special-bg button:active {
  transform:scale(.96);
  box-shadow:0 0 12px var(--accent);
}

